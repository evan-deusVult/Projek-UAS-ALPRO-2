<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TBC Detector</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
    }
    .hidden {
      display: none;
    }
  </style>
</head>

<body class="bg-gradient-to-br from-blue-100 via-blue-50 to-white min-h-screen flex flex-col">


  <!-- <header class="bg-gradient-to-r from-blue-200 via-blue-100 to-blue-50 py-4 shadow-md">
    <div class="container mx-auto text-lef">
      <h1 class="text-3xl font-bold text-gray-800">TBC Detector</h1>
    </div>
  </header> -->

  <header class="bg-gradient-to-r from-blue-300 via-blue-200 to-blue-100 py-4 shadow-md">
    <div class="container mx-auto flex justify-between items-center px-4">
      <!-- Logo atau Judul -->
      <h1 class="text-2xl font-bold text-gray-800">TBC Detector</h1>
  
      <!-- Navigation -->
      <nav class="space-x-4">
        <!-- Home Button -->
        <a href="/" 
           class="text-gray-800 font-medium hover:text-gray-600 transition-colors duration-200">
          Home
        </a>
        
        <!-- Features Button -->
        <a href="#features" 
           class="text-gray-800 font-medium hover:text-gray-600 transition-colors duration-200">
          Features
        </a>
  
        <!-- FAQ Button -->
        <a href="#faq" 
           class="text-gray-800 font-medium hover:text-gray-600 transition-colors duration-200">
          FAQ
        </a>
      </nav>
    </div>
  </header>
  

  <main class="container mx-auto px-4 py-16 text-center flex-grow">
    <h1 class="text-4xl font-bold text-gray-900">TBC Detector</h1>
    <p class="text-gray-600 mt-4">TBC Detector using Machine Learning Based on Lung X-Rays</p>

    <!-- Form Upload -->
    <form id="uploadForm" class="mt-8 bg-white shadow rounded-lg p-8 text-center" enctype="multipart/form-data">
      <h2 class="text-2xl font-bold text-center text-gray-800 mb-8">X-ray Scanner</h2>
    
      <!-- Drag and Drop Area -->
      <div id="dropZone" class="border-dashed border-2 border-gray-300 p-8 rounded-lg relative bg-gray-50 cursor-pointer hover:border-blue-500">
        <div id="dropZoneText" class="text-center">
          <i class="fas fa-upload text-blue-500 text-3xl"></i>
          <p class="mt-2 text-gray-700">Click to upload or drag and drop</p>
          <p class="text-sm text-gray-500">JPG, JPEG, PNG, or DICOM files supported</p>
        </div>
        <input id="fileInput" type="file" accept=".jpg, .jpeg, .png, .dcm" class="absolute top-0 left-0 w-full h-full opacity-0 cursor-pointer" />
      </div>
    
      <!-- Preview Container -->
      <div id="previewContainer" class="relative hidden mt-4 flex justify-center items-center">
        <div class="relative">
          <button id="cancelUpload" class="absolute top-0 right-0 bg-red-500 text-white rounded-full w-6 h-6 flex justify-center items-center hover:bg-red-600 shadow">
            &times;
          </button>
          <img id="imagePreview" class="border rounded shadow-lg max-w-xs mx-auto" alt="Preview gambar akan muncul di sini." />
        </div>
      </div>
    
      <button type="submit" class="bg-blue-600 text-white px-6 py-3 rounded-full text-lg hover:bg-blue-700 mt-4">
        Start Analyze
      </button>
    </form>
    
    
    
   <!-- Hasil Prediksi -->
  <div id="result" class="mt-8 hidden bg-gray-100 shadow rounded-lg p-6 text-center">
    <h3 class="text-xl font-semibold text-gray-800 mb-4">Prediction Result</h3>
    <p id="predictionText" class="text-gray-700 text-lg"></p>
  </div>


  <section id="features" class="mt-12 bg-white">
    <div class="mt-16 bg-white shadow rounded-lg p-6">
      <h2 class="text-3xl font-bold text-center text-gray-800 mb-8">Key Features of TBC Detector</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 px-6 lg:px-12">
          <!-- Feature 1 -->
          <div class="bg-gray-50 shadow-md rounded-lg p-6 text-center hover:shadow-lg transition-shadow duration-300">
            <i class="fas fa-x-ray text-blue-500 text-4xl mb-4"></i>
            <h3 class="text-lg font-semibold text-gray-800">Multi-Modality Analysis</h3>
            <p class="text-gray-600 mt-2">
              Analyze X-ray images for tuberculosis detection with cutting-edge machine learning algorithms.
            </p>
          </div>
      
          <!-- Feature 2 -->
          <div class="bg-gray-50 shadow-md rounded-lg p-6 text-center hover:shadow-lg transition-shadow duration-300">
            <i class="fas fa-brain text-blue-500 text-4xl mb-4"></i>
            <h3 class="text-lg font-semibold text-gray-800">AI-Powered Accuracy</h3>
            <p class="text-gray-600 mt-2">
              Utilize advanced AI for precise image interpretation and abnormality detection.
            </p>
          </div>
      
          <!-- Feature 3 -->
          <div class="bg-gray-50 shadow-md rounded-lg p-6 text-center hover:shadow-lg transition-shadow duration-300">
            <i class="fas fa-bolt text-blue-500 text-4xl mb-4"></i>
            <h3 class="text-lg font-semibold text-gray-800">Rapid Results</h3>
            <p class="text-gray-600 mt-2">
              Get results quickly, enabling faster decisions for diagnosis and treatment.
            </p>
          </div>
      
          <!-- Feature 4 -->
          <div class="bg-gray-50 shadow-md rounded-lg p-6 text-center hover:shadow-lg transition-shadow duration-300">
            <i class="fas fa-file-medical-alt text-blue-500 text-4xl mb-4"></i>
            <h3 class="text-lg font-semibold text-gray-800">Simple Diagnosis Result</h3>
            <p class="text-gray-600 mt-2">
              Get clear results indicating whether the X-ray is positive for TBC or not, ensuring straightforward interpretation.
            </p>
          </div>
      
          <!-- Feature 5 -->
          <div class="bg-gray-50 shadow-md rounded-lg p-6 text-center hover:shadow-lg transition-shadow duration-300">
            <i class="fas fa-user-friends text-blue-500 text-4xl mb-4"></i>
            <h3 class="text-lg font-semibold text-gray-800">User-Friendly Interface</h3>
            <p class="text-gray-600 mt-2">
              Navigate an intuitive platform designed for both medical professionals and patients.
            </p>
          </div>
      
          <!-- Feature 6 -->
          <div class="bg-gray-50 shadow-md rounded-lg p-6 text-center hover:shadow-lg transition-shadow duration-300">
            <i class="fas fa-shield-alt text-blue-500 text-4xl mb-4"></i>
            <h3 class="text-lg font-semibold text-gray-800">Data Privacy & Security</h3>
            <p class="text-gray-600 mt-2">
              Ensure secure processing of medical data with no long-term storage.
            </p>
          </div>
        </div>
    </div>
  </section>
  


  <!-- FAQ Section with Dropdown -->
  <section id="faq" class="mt-12 bg-white">

    <div class="mt-16 bg-white shadow rounded-lg p-6">
      <h2 class="text-3xl lg:text-4xl font-extrabold text-center text-gray-800 mb-8">Frequently Asked Questions</h2>
      <div class="space-y-4">
        <!-- Question 1 -->
        <div>
          <button
            class="w-full text-left flex items-center justify-between bg-gray-100 p-4 rounded-lg"
            onclick="toggleFAQ('faq1')"
          >
            <span class="font-semibold text-gray-800">1. What types of files can I upload?</span>
            <i id="icon-faq1" class="fas fa-chevron-down text-gray-600"></i>
          </button>
          <div
            id="faq1"
            class="hidden overflow-hidden mt-2 text-gray-600 text-left"
          >
            You can upload JPG, JPEG, PNG, and DICOM files for analysis. These file types are commonly used for X-ray scans.
          </div>
        </div>
    
        <!-- Question 2 -->
        <div>
          <button
            class="w-full text-left flex items-center justify-between bg-gray-100 p-4 rounded-lg"
            onclick="toggleFAQ('faq2')"
          >
            <span class="font-semibold text-gray-800">2. How accurate is the prediction?</span>
            <i id="icon-faq2" class="fas fa-chevron-down text-gray-600"></i>
          </button>
          <div
            id="faq2"
            class="hidden overflow-hidden mt-2 text-gray-600 text-left"
          >
            The accuracy of the prediction depends on the quality of the X-ray scan and the machine learning model used for analysis. We aim for high accuracy, but results may vary.
          </div>
        </div>
    
        <!-- Question 3 -->
        <div>
          <button
            class="w-full text-left flex items-center justify-between bg-gray-100 p-4 rounded-lg"
            onclick="toggleFAQ('faq3')"
          >
            <span class="font-semibold text-gray-800">3. Can I upload a scan of a different body part?</span>
            <i id="icon-faq3" class="fas fa-chevron-down text-gray-600"></i>
          </button>
          <div
            id="faq3"
            class="hidden overflow-hidden mt-2 text-gray-600 text-left"
          >
            Currently, this detector is designed to analyze lung X-ray scans specifically for tuberculosis (TBC). Uploading scans of other body parts may not provide accurate results.
          </div>
        </div>
    
        <!-- Question 4 -->
        <div>
          <button
            class="w-full text-left flex items-center justify-between bg-gray-100 p-4 rounded-lg"
            onclick="toggleFAQ('faq4')"
          >
            <span class="font-semibold text-gray-800">4. What happens if the prediction shows positive for TBC?</span>
            <i id="icon-faq4" class="fas fa-chevron-down text-gray-600"></i>
          </button>
          <div
            id="faq4"
            class="hidden overflow-hidden mt-2 text-gray-600 text-left"
          >
            If the prediction is positive, we recommend consulting a medical professional for a comprehensive diagnosis and treatment plan. This tool is designed to assist in early detection, not to replace medical advice.
          </div>
        </div>
    
        <!-- Question 5 -->
        <div>
          <button
            class="w-full text-left flex items-center justify-between bg-gray-100 p-4 rounded-lg"
            onclick="toggleFAQ('faq5')"
          >
            <span class="font-semibold text-gray-800">5. Is my uploaded data secure?</span>
            <i id="icon-faq5" class="fas fa-chevron-down text-gray-600"></i>
          </button>
          <div
            id="faq5"
            class="hidden overflow-hidden mt-2 text-gray-600 text-left"
          >
            We take privacy and security seriously. Your data is processed securely and not stored after the analysis.
          </div>
        </div>
      </div>
    </div>
  </section>
  



  </main>

   <!-- Footer -->
   <footer class="bg-gradient-to-t from-blue-300 to-blue-200 py-4">
    <div class="container mx-auto text-center">
      <p class="text-sm font-bold">Project by: Kelompok 13</p>
    </div>
  </footer>


  <script>
  document.addEventListener("DOMContentLoaded", () => {
  const fileInput = document.getElementById("fileInput");
  const dropZone = document.getElementById("dropZone");
  const previewContainer = document.getElementById("previewContainer");
  const imagePreview = document.getElementById("imagePreview");
  const cancelUpload = document.getElementById("cancelUpload");
  const uploadForm = document.getElementById("uploadForm");
  const resultContainer = document.getElementById("result");
  const predictionText = document.getElementById("predictionText");

  // Helper function to show preview
  const showPreview = (file) => {
    const validTypes = ["image/jpeg", "image/png", "image/jpg"];
    if (!validTypes.includes(file.type)) {
      alert("File harus berupa JPG atau PNG.");
      return;
    }

    const reader = new FileReader();
    reader.onload = () => {
      imagePreview.src = reader.result;
      previewContainer.classList.remove("hidden");
      dropZone.classList.add("hidden");
    };
    reader.readAsDataURL(file);
  };

  // Event: Click to Upload
  fileInput.addEventListener("change", () => {
    const file = fileInput.files[0];
    if (file) showPreview(file);
  });

  // Event: Drag and Drop
  dropZone.addEventListener("dragover", (e) => {
    e.preventDefault();
    dropZone.classList.add("border-blue-500");
  });

  dropZone.addEventListener("dragleave", () => {
    dropZone.classList.remove("border-blue-500");
  });

  dropZone.addEventListener("drop", (e) => {
    e.preventDefault();
    dropZone.classList.remove("border-blue-500");
    const file = e.dataTransfer.files[0];
    if (file) {
      fileInput.files = e.dataTransfer.files; // Update file input
      showPreview(file);
    }
  });

  // Event: Cancel Upload
  cancelUpload.addEventListener("click", () => {
    fileInput.value = ""; // Reset input
    imagePreview.src = ""; // Clear image preview
    previewContainer.classList.add("hidden");
    dropZone.classList.remove("hidden");
    resultContainer.classList.add("hidden"); // Hide prediction result
    predictionText.textContent = ""; // Clear prediction text
  });

  // Event: Submit Form
  uploadForm.addEventListener("submit", async (e) => {
    e.preventDefault();
    const file = fileInput.files[0];
    if (!file) {
      alert("Harap pilih file sebelum melanjutkan.");
      return;
    }

    const formData = new FormData();
    formData.append("file", file);

    // Tampilkan loading di bagian hasil prediksi
    resultContainer.classList.remove("hidden");
    predictionText.textContent = "Processing...";

    try {
      const response = await fetch("/predict", {
        method: "POST",
        body: formData,
      });

      if (!response.ok) throw new Error("Failed to analyze image");

      const result = await response.json();
      predictionText.textContent = `Prediction Result: ${result.result}`;
    } catch (error) {
      predictionText.textContent = `Error: ${error.message}`;
    }
  });
});

  // Dropdown Toggle Function
  function toggleFAQ(id) {
    const content = document.getElementById(id);
    const icon = document.getElementById(`icon-${id}`);
    const isHidden = content.classList.contains('hidden');

    // Toggle dropdown visibility
    if (isHidden) {
      content.classList.remove('hidden'); // Show answer
      icon.classList.remove('fa-chevron-down');
      icon.classList.add('fa-chevron-up'); // Change icon
    } else {
      content.classList.add('hidden'); // Hide answer
      icon.classList.remove('fa-chevron-up');
      icon.classList.add('fa-chevron-down'); // Change icon
    }
  }


  </script>
</body>
</html>
